var search=document.querySelector(".search-link"),link=document.querySelector(".login-link"),feedback=document.querySelector(".map-btn"),popup_search=document.querySelector(".modal-search"),popup_login=document.querySelector(".modal-login"),popup_feedback=document.querySelector(".modal-feedback"),form=popup_login.querySelector("form"),email=popup_login.querySelector("[name=email-enter]"),password=popup_login.querySelector("[name=password]"),storage=localStorage.getItem("email"),search_line=popup_search.querySelector("[name=search]"),
feedback_line=popup_feedback.querySelector("[name=user-name]"),close=popup_feedback.querySelector(".modal-close");search.addEventListener("click",function(a){a.preventDefault();popup_search.classList.add("modal-show");search_line.focus()});link.addEventListener("click",function(a){a.preventDefault();popup_login.classList.add("modal-show");storage?(email.value=storage,password.focus()):email.focus()});
feedback.addEventListener("click",function(a){a.preventDefault();popup_feedback.classList.add("modal-show");feedback_line.focus()});form.addEventListener("submit",function(a){email.value&&password.value?localStorage.setItem("email",email.value):(a.preventDefault(),popup_login.classList.add("modal-error"))});close.addEventListener("click",function(a){a.preventDefault();popup_feedback.classList.remove("modal-show")});
window.addEventListener("keydown",function(a){27===a.keyCode&&(popup_login.classList.contains("modal-show")||popup_search.classList.contains("modal-show"))&&(popup_login.classList.remove("modal-show"),popup_search.classList.remove("modal-show"))});